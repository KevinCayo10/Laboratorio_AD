"use strict";(self.webpackChunkappGSV=self.webpackChunkappGSV||[]).push([[690],{8690:(I,c,a)=>{a.r(c),a.d(c,{PrestamosModule:()=>S});var m=a(6895),u=a(1667),f=a(5226),d=a.n(f),g=a(9849),o=a(4650),p=a(529);let v=(()=>{class r{constructor(t){this.http=t,this.url=""}cargarPrestamos(){return this.http.get(this.url)}cargarPretamo(t){return this.http.get(this.url+t)}registrarPrestamo(t){return this.http.post(this.url,t)}actualizarPrestamo(t,e){return this.http.put(this.url+t,e)}eliminarPrestamo(t){return this.http.delete(this.url+t)}}return r.\u0275fac=function(t){return new(t||r)(o.LFG(p.eN))},r.\u0275prov=o.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var h=a(9828),C=a(8010),Z=a(7284),b=a(4841),P=a(6846),_=a(9536),E=a(7653),n=a(433);let T=(()=>{class r{constructor(){this.titulo="",this.formularioEnviado=new o.vpe,this.formularioCerrado=new o.vpe}ngOnInit(){this.cargarFormulario()}cargarFormulario(){this.formulario=new n.cw({id:new n.NI(this.data?._id),nombresCompletos:new n.NI(this.data?.nombresCompletos,n.kI.required),direccion:new n.NI(this.data?.direccion,n.kI.required),correoElectronico:new n.NI(this.data?.correoElectronico,n.kI.required),celular:new n.NI(this.data?.celular)})}grabar(){if(this.formulario.valid){const t=this.formulario.value;console.log(t),this.formularioEnviado.emit(t)}}cerrarFormulario(){this.formularioCerrado.emit()}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=o.Xpm({type:r,selectors:[["gsv-form"]],inputs:{data:"data"},outputs:{formularioEnviado:"formularioEnviado",formularioCerrado:"formularioCerrado"},decls:79,vars:2,consts:[[1,"container","col-md-10"],[1,"card","custom-card"],[1,"card-body"],[1,"form-container",3,"formGroup","ngSubmit"],[1,"row"],[1,"col"],[1,"mb-3"],["for","idEquipoPer",1,"form-label"],[1,"input-group"],["type","text","id","idEquipoPer","formControlName","idEquipoPer",1,"form-control"],[1,"input-group-text"],[1,"fas","fa-id-card"],["for","fechaPrestamo",1,"form-label"],["type","date","id","fechaPrestamo","formControlName","fechaPrestamo",1,"form-control"],[1,"fas","fa-calendar"],["for","fechaDevolucion",1,"form-label"],["type","date","id","fechaDevolucion","formControlName","fechaDevolucion",1,"form-control"],["for","idUsuarioPrestaPer",1,"form-label"],["type","text","id","idUsuarioPrestaPer","formControlName","idUsuarioPrestaPer",1,"form-control"],[1,"fas","fa-user"],["for","idUsuarioSolicitaPer",1,"form-label"],["type","text","id","idUsuarioSolicitaPer","formControlName","idUsuarioSolicitaPer",1,"form-control"],["for","observaciones",1,"form-label"],["type","text","id","observaciones","formControlName","observaciones",1,"form-control"],[1,"fas","fa-comment"],["for","estadoEquipo",1,"form-label"],["type","text","id","estadoEquipo","formControlName","estadoEquipo",1,"form-control"],[1,"fas","fa-check-circle"],["for","aprobado",1,"form-label"],["type","text","id","aprobado","formControlName","aprobado",1,"form-control"],[1,"fas","fa-check"],[1,"d-flex","justify-content-end"],["type","submit",1,"btn","btn-primary","me-2",3,"disabled"],[1,"fas","fa-save"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"fas","fa-times"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"form",3),o.NdJ("ngSubmit",function(){return e.grabar()}),o.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),o._uU(8,"ID del Equipo"),o.qZA(),o.TgZ(9,"div",8),o._UZ(10,"input",9),o.TgZ(11,"span",10),o._UZ(12,"i",11),o.qZA()()()(),o.TgZ(13,"div",5)(14,"div",6)(15,"label",12),o._uU(16,"Fecha de Prestamo"),o.qZA(),o.TgZ(17,"div",8),o._UZ(18,"input",13),o.TgZ(19,"span",10),o._UZ(20,"i",14),o.qZA()()()()(),o.TgZ(21,"div",4)(22,"div",5)(23,"div",6)(24,"label",15),o._uU(25,"Fecha de Devoluci\xf3n"),o.qZA(),o.TgZ(26,"div",8),o._UZ(27,"input",16),o.TgZ(28,"span",10),o._UZ(29,"i",14),o.qZA()()()(),o.TgZ(30,"div",5)(31,"div",6)(32,"label",17),o._uU(33,"ID del Usuario que Presta"),o.qZA(),o.TgZ(34,"div",8),o._UZ(35,"input",18),o.TgZ(36,"span",10),o._UZ(37,"i",19),o.qZA()()()()(),o.TgZ(38,"div",4)(39,"div",5)(40,"div",6)(41,"label",20),o._uU(42,"ID del Usuario que Solicita"),o.qZA(),o.TgZ(43,"div",8),o._UZ(44,"input",21),o.TgZ(45,"span",10),o._UZ(46,"i",19),o.qZA()()()(),o.TgZ(47,"div",5)(48,"div",6)(49,"label",22),o._uU(50,"Observaciones"),o.qZA(),o.TgZ(51,"div",8),o._UZ(52,"input",23),o.TgZ(53,"span",10),o._UZ(54,"i",24),o.qZA()()()()(),o.TgZ(55,"div",4)(56,"div",5)(57,"div",6)(58,"label",25),o._uU(59,"Estado del Equipo"),o.qZA(),o.TgZ(60,"div",8),o._UZ(61,"input",26),o.TgZ(62,"span",10),o._UZ(63,"i",27),o.qZA()()()(),o.TgZ(64,"div",5)(65,"div",6)(66,"label",28),o._uU(67,"Aprobado"),o.qZA(),o.TgZ(68,"div",8),o._UZ(69,"input",29),o.TgZ(70,"span",10),o._UZ(71,"i",30),o.qZA()()()()(),o.TgZ(72,"div",31)(73,"button",32),o._UZ(74,"i",33),o._uU(75," Grabar "),o.qZA(),o.TgZ(76,"button",34),o.NdJ("click",function(){return e.cerrarFormulario()}),o._UZ(77,"i",35),o._uU(78," Cancelar "),o.qZA()()()()()()),2&t&&(o.xp6(3),o.Q6J("formGroup",e.formulario),o.xp6(70),o.Q6J("disabled",e.formulario.invalid))},dependencies:[n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u]}),r})();function A(r,s){if(1&r){const t=o.EpF();o.TgZ(0,"gsv-search",5),o.NdJ("buscadorEnviado",function(i){o.CHM(t);const l=o.oxw();return o.KtG(l.buscarData(i))}),o.qZA()}}function U(r,s){if(1&r){const t=o.EpF();o.TgZ(0,"gsv-form",6),o.NdJ("formularioEnviado",function(i){o.CHM(t);const l=o.oxw();return o.KtG(l.grabarFormulario(i))})("formularioCerrado",function(){o.CHM(t);const i=o.oxw();return o.KtG(i.cerrarFormulario())}),o.qZA()}if(2&r){const t=o.oxw();o.Q6J("data",t.fila)}}const y=[{path:"",component:(()=>{class r{constructor(t){this.prestamoService=t,this.registros=[{_id:1,nombresCompletos:"Juan P\xe9rez",correoElectronico:"juan.perez@mail.com",direccion:"Av. Quito",celular:"0991234567"}],this.title="PRESTAMOS",this.metaDataColumns=[{field:"_id",title:"ID"},{field:"id_equipo_per",title:"ID EQUIPO"},{field:"fecha_prestamo",title:"FECHA DEL PRESTAMO"},{field:"fecha_devolucion",title:"FECHA DE DEVOLUCION"},{field:"id_usuario_presta_per",title:"TECNICO"},{field:"id_usuario_solicita_per",title:"USUARIO"},{field:"observariones",title:"OBSERVACION"},{field:"estado_equipo",title:"ESTADO EQUIPO"},{field:"aprobado",title:"ESTADO PRESTAMO"}],this.keypadButtons=[{icon:"fa-solid fa-cloud-arrow-down",color:"btn-success",accion:"download"},{icon:"fa-solid fa-plus",color:"btn-primary",accion:"NUEVO"}],this.data=[],this.totalRegistros=this.data.length,this.cargarClientes("")}cargarClientes(t){this.prestamoService.cargarPrestamos().subscribe(e=>{this.registros=e,t&&(console.log(t),this.registros=this.registros.filter(i=>i.nombresCompletos.toLowerCase().includes(t.toLowerCase())),console.log(this.registros)),this.totalRegistros=this.registros.length,this.changePage(0)})}changePage(t){const e=g.N.PAGE_SIZE,i=e*t;this.data=this.registros.slice(i,i+e)}enviarAccion(t){switch(t){case"DOWNLOAD":break;case"NUEVO":this.formulario=!0,this.abrirFormulario()}}accionEditar(t){this.formulario=!0,this.abrirFormulario(t)}accionEliminar(t){console.log("Entro a pagelis"),this.prestamoService.eliminarPrestamo(t).subscribe(()=>{this.cargarClientes("")})}buscarData(t){console.log(t),this.cargarClientes(t.terminoBusqueda)}grabarFormulario(t){if(t)if(t.id){const e={...t};console.log("Entro al ID"),console.log(e),this.prestamoService.actualizarPrestamo(t.id,e).subscribe(()=>{this.cargarClientes(""),this.formulario=!1,this.mostrarMensajeActualizacion()})}else{const e={...t};this.prestamoService.registrarPrestamo(e).subscribe(()=>{console.log("Dentro regsitrar"),console.log(e),this.cargarClientes(""),this.formulario=!1,this.mostrarMensajeA\u00f1adir()})}else this.formulario=!1}abrirFormulario(t=null){this.fila=t}cerrarFormulario(){this.formulario=!1}mostrarMensajeActualizacion(){d().fire({title:"Registro actulaizado",icon:"info",timer:3e3,showConfirmButton:!1})}mostrarMensajeA\u00f1adir(){d().fire({title:"Registro a\xf1adido",icon:"info",timer:3e3,showConfirmButton:!1})}}return r.\u0275fac=function(t){return new(t||r)(o.Y36(v))},r.\u0275cmp=o.Xpm({type:r,selectors:[["gsv-page-list"]],decls:9,vars:7,consts:[[3,"buscadorEnviado",4,"ngIf"],[3,"data","formularioEnviado","formularioCerrado",4,"ngIf"],[3,"data","metaDataColumns","title","onClick","onClickEliminar"],[3,"length","onChangePage"],[3,"keypadButtons","onClick"],[3,"buscadorEnviado"],[3,"data","formularioEnviado","formularioCerrado"]],template:function(t,e){1&t&&(o.TgZ(0,"div"),o._UZ(1,"gsv-title"),o.YNc(2,A,1,0,"gsv-search",0),o.qZA(),o.YNc(3,U,1,1,"gsv-form",1),o.TgZ(4,"gsv-container")(5,"perfect-scrollbar")(6,"gsv-table",2),o.NdJ("onClick",function(l){return e.accionEditar(l)})("onClickEliminar",function(l){return e.accionEliminar(l)}),o.qZA()(),o.TgZ(7,"gsv-paginator",3),o.NdJ("onChangePage",function(l){return e.changePage(l)}),o.qZA()(),o.TgZ(8,"gsv-keypad-button",4),o.NdJ("onClick",function(l){return e.enviarAccion(l)}),o.qZA()),2&t&&(o.xp6(2),o.Q6J("ngIf",!e.formulario),o.xp6(1),o.Q6J("ngIf",e.formulario),o.xp6(3),o.Q6J("data",e.data)("metaDataColumns",e.metaDataColumns)("title",e.title),o.xp6(1),o.Q6J("length",e.totalRegistros),o.xp6(1),o.Q6J("keypadButtons",e.keypadButtons))},dependencies:[m.O5,h.r,C.a,Z.e,b.Vv,P.J,_.o,E.g,T]}),r})()}];let F=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=o.oAB({type:r}),r.\u0275inj=o.cJS({imports:[u.Bz.forChild(y),u.Bz]}),r})();var N=a(8366);let S=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=o.oAB({type:r}),r.\u0275inj=o.cJS({imports:[m.ez,F,N.m]}),r})()}}]);